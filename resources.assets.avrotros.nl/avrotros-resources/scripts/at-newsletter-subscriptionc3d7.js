!function(n){var r={};function o(e){var t;return(r[e]||(t=r[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,o),t.l=!0,t)).exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=230)}({0:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return e&&"object"===r(e)&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function l(e,t){return t&&!0===t.clone&&s(e)?p(Array.isArray(e)?[]:{},e,t):e}function f(n,e,r){var o=n.slice();return e.forEach(function(e,t){void 0===o[t]?o[t]=l(e,r):s(e)?o[t]=p(n[t],e,r):-1===n.indexOf(e)&&o.push(l(e,r))}),o}function p(e,t,n){var r,o,i,a,u=Array.isArray(t),c=(n||{arrayMerge:f}).arrayMerge||f;return u?Array.isArray(e)?c(e,t,n):l(t,n):(o=t,i=n,a={},s(r=e)&&Object.keys(r).forEach(function(e){a[e]=l(r[e],i)}),Object.keys(o).forEach(function(e){s(o[e])&&r[e]?a[e]=p(r[e],o[e],i):a[e]=l(o[e],i)}),a)}n.d(t,"a",function(){return p}),p.all=function(e,n){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce(function(e,t){return p(e,t,[{},n])})}},230:function(e,t,n){"use strict";n.r(t);var r=n(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}(r.key),r)}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}FormData.prototype.asArray=function(){var e,t={},n=function(e,t){var n,r,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return r=!(n=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){r=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(r)throw o}}};if(Array.isArray(e)||(a=p(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.entries());try{for(n.s();!(e=n.n()).done;){var r,o=f(e.value,2),i=o[0],a=o[1],u=-1!=i.indexOf("[]"),c=i.match(/([^\]\['"]+)/g),s=t;for(r in c){var l=c[r];r!=c.length-1?(void 0===s[l]&&(s[l]={}),s=s[l]):(u&&void 0===s[l]&&(s[l]=[]),Array.isArray(s[l])?s[l].push(a):s[l]=a)}}}catch(e){n.e(e)}finally{n.f()}return t};var t=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=o;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");this.element=e,this.dataset=t,this.option=this.options,this.inputs=this.element.getElementsByTagName("input"),this.element.checkValidity()?this.send():this.showError()}var e,t,n;return e=o,(t=[{key:"options",get:function(){return r.a.all([o.default,"string"==typeof this.dataset?JSON.parse(this.dataset):this.dataset,{formData:this.formData}])}},{key:"group",get:function(){return!!this.option.formData.group}},{key:"formData",get:function(){return Object.prototype.hasOwnProperty.call(this.dataset,"formData")?this.dataset.formData:new FormData(this.element).asArray()}},{key:"queryInput",get:function(){var n=this,r=[];return Object.keys(this.option.formData).map(function(t){"object"!==i(n.option.formData[t])?r.push("".concat(t,': "').concat(n.option.formData[t],'"')):"group"!==t&&(r.push("".concat(t,": [")),Object.keys(n.option.formData[t]).map(function(e){return r.push('{ field: "'.concat(e,'", value: "').concat(n.option.formData[t][e],'" }'))}).join("\n"),r.push("]"))}),r}},{key:"query",get:function(){return"\n      ".concat(this.option.type," {\n        SubscribeNewsletter(input: {\n            ").concat(this.queryInput.join("\n"),"\n            }) {\n          contact {\n            id\n          }\n          error {\n            code\n            message\n            fields\n          }\n        }\n      }\n    ")}},{key:"queries",get:function(){var r=this;return"\n      ".concat(this.option.type," {\n          ").concat(Object.keys(this.option.formData.group).map(function(n){return Object.keys(r.option.formData.group[n]).map(function(t){return"".concat(t.replace(/[?!]/gm,""),": SubscribeNewsletter(input: {\n                      ").concat(Object.keys(r.option.formData.group[n][t]).map(function(e){return"".concat(e,': "').concat(r.option.formData.group[n][t][e],'"')}),"\n                      ").concat(r.queryInput.join("\n"),"\n                  }) {\n                      contact {\n                        id\n                      }\n                      error {\n                        code\n                        message\n                        fields\n                      }\n                  }")}).join("\n")}),"\n      }")}},{key:"translate",value:function(e){return this.option.translate[e]}},{key:"createMessage",value:function(e){var t,n="";for(t in n+="\n        ".concat(this.group?"<p>Zojuist heeft u zich aangemeld voor de volgende nieuwsbrieven.</p>":""),e){var r=e[t],o=null!==r.contact;console.log(r.error),n+="\n                <h1>".concat(this.group?"".concat(t,": "):"").concat(o?"Bedankt voor het aanmelden":"Aanmelden voor de nieuwsbrief is helaas mislukt","</h1>\n        ").concat(o?"<p>Er is een bevestigingsmail gestuurd naar het opgegeven emailadres. Klik op de link in deze mail om je aanmelding af te ronden</p>":"<p>".concat(this.translate(r.error.code),"</p>\n            ").concat("InvalidArgumentException"===r.error.code?"<p>".concat(r.error.message,"</p>"):""),"\n      ")}return n}},{key:"createClientMessage",value:function(e){window.At.Util.TriggerEvent("AtNewsletterSubscription:Response",this.createMessage(e))}},{key:"showError",value:function(){var t=this;Object.values(this.inputs).forEach(function(e){e.classList.add(t.option.errorClass),e.placeholder=t.option.errorInputPlaceholder,e.addEventListener("focus",function(){e.classList.remove(t.option.errorClass)},!1)})}},{key:"send",value:function(){var t=this,e=(this.element.classList.add("loading"),Object.values(this.inputs).forEach(function(e){e.classList.remove(t.option.errorClass)}),{method:this.option.method,headers:{"Content-Type":"application/json"},body:JSON.stringify({query:this.group?this.queries:this.query})});fetch(this.option.endpoint,e).then(function(e){return e.json()}).then(function(e){t.createClientMessage(e.data),t.element.classList.remove("loading")}).catch(console.error)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),u=(t.default={endpoint:"https://graphql.avrotros.nl/graphql/",type:"query",method:"POST",errorClass:"error",errorInputPlaceholder:"Vul a.u.b een email adress in.",translate:{ContactAlreadyExistsException:"Je heb je al aangemeld en ontvangt de nieuwsbrief al. Komt er geen nieuwsbrief binnen? Kijk dan voor de zekerheid even bij de ongewenste mail.",CampaignDoesNotExistException:"Er is iets fout gegaan, de nieuwsbrief waar op je wilt aanmelden bestaat niet",InvalidArgumentException:"Er is iets fout gegaan. Controleer je gegevens van de volgende velden:",ContactCouldNotBeCreatedException:"Door een onbekende fout is de aanmelding mislukt. Controleer je gegevens en probeer het nog een keer"}},t);void 0===window.At.JSLoader&&(document.querySelector("[data-at-newsletter-subscription]").addEventListener("submit",function(e){e.preventDefault(),new u(e.target,e.target.dataset.atNewsletterSubscription)}),window.addEventListener("AtNewsletterSubscription:Trigger",function(e){e.preventDefault(),new u(document.body,e.detail)})),window.addEventListener("AtNewsletterSubscription:Trigger",function(e){e.detail.element.addEventListener("submit",function(e){e.preventDefault(),new u(e.target,e.target.dataset.atNewsletterSubscription)})}),window.addEventListener("AtNewsletterSubscription:Response",function(e){void 0!==$.disclosure?$.disclosure({mode:"create",content:"".concat(e.detail)}):$("body").trigger("AtModal:Create",{content:{mode:"create",body:"".concat(e.detail)}})})}});